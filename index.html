<html>
    <head>
        <meta charset="utf-8">
        <title>Открытка подруге</title>
        <link rel="stylesheet" href="style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <div class="sample-flipbook" style="width: 400px; height: 300px; margin: 0 auto; margin-top: 100px;">
            <div id="flipbook">
                <div class="hard" style="text-align: center; line-height: 20px; font-family: 'DejaVu Serif'">
                    <img src="happy.jpg" style="width: 200px; height: 300px;">
                </div>
                <div style="text-align: center; line-height: 20px; font-family: 'DejaVu Serif'" >
                    <div style="padding-top: 100px;">
                        <span>C днем</span><br>
                        <span>рождения друк!</span><br><br>
                        <img src="dance.gif" style="width: 100px;">
                    </div>
                </div>
                <div>
                    <img src="alena.jpg" style="width: 200px; height: 300px;">
                </div>
                <div class="hard"></div>
            </div>
        </div>

        <audio id="ranetki" src="ranetki.mp3" type="audio/mpeg"></audio>
        <script
                src="https://code.jquery.com/jquery-2.2.4.min.js"
                integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
                crossorigin="anonymous"></script>
        <script src="turn.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $("#flipbook").turn({
                    width: 400,
                    height: 300,
                    autoCenter: true
                });

                var isPlay = false;
                var ifr;
                var isiOs = (navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i));
                $("#flipbook").bind("turned", function(event, page, view) {
                    if((page == 2 || page == 3) && !isPlay) {
                        if(isiOs) {
                            ifr=document.createElement("iframe");
                            ifr.setAttribute('src', 'ranetki.mp3');
                            ifr.setAttribute('id', "bgAudio");
                            ifr.setAttribute('width', '0');
                            ifr.setAttribute('height', '0');
                            ifr.setAttribute('scrolling', 'no');
                            ifr.style.border="0px";
                            document.body.appendChild(ifr)
                        } else {
                            audio = document.getElementById('ranetki');
                            audio.play();
                            isPlay = true;
                        }
                    } else if (page == 1) {
                        if(isiOs) {
                            document.body.removeChild(ifr);
                        } else {
                            audio = document.getElementById('ranetki');
                            audio.pause();
                            audio.currentTime = 0;
                            isPlay = false;
                        }
                    }
                });
            });
        </script>
    </body>
</html>